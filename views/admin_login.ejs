<!doctype html>
<html lang="es" data-theme="light">
<head>
    <%- include('partials/head') %>
    <title>TransportApp Â· Admin</title>

    <style>
        /* Fondo con blur (glass) */
        .bg-blur-wrap{
            min-height: 100vh;
            position: relative;
            overflow: hidden;
            background: var(--bg);
        }

        .bg-blur-wrap::before,
        .bg-blur-wrap::after{
            content:"";
            position:absolute;
            width: 520px;
            height: 520px;
            border-radius: 999px;
            filter: blur(22px);
            opacity: .55;
            pointer-events:none;
        }

        .bg-blur-wrap::before{
            left: -160px;
            top: -160px;
            background: radial-gradient(circle at 30% 30%, rgba(106,15,31,.55), rgba(106,15,31,0));
        }

        .bg-blur-wrap::after{
            right: -180px;
            bottom: -180px;
            background: radial-gradient(circle at 30% 30%, rgba(106,15,31,.35), rgba(106,15,31,0));
        }

        .glass-card{
            background: color-mix(in srgb, var(--card) 78%, transparent);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            border-radius: 22px;
            backdrop-filter: blur(14px);
            -webkit-backdrop-filter: blur(14px);
        }

        .admin-badge{
            display:inline-flex;
            align-items:center;
            gap:.5rem;
            padding: .45rem .75rem;
            border-radius: 999px;
            border: 1px solid var(--border);
            background: var(--chip-bg);
            color: var(--chip-text);
            font-weight: 800;
            font-size: .9rem;
        }

        .form-control{
            border-radius: 14px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
        }
        .form-control::placeholder{
            color: color-mix(in srgb, var(--muted) 85%, transparent);
        }

        .form-control:focus{
            border-color: color-mix(in srgb, var(--wine) 65%, var(--border));
            box-shadow: 0 0 0 .25rem rgba(106,15,31,.15);
        }

        .btn-admin{
            border-radius: 14px;
            padding: .75rem 1rem;
            font-weight: 900;
            letter-spacing: .2px;
        }

        .back-link{
            color: color-mix(in srgb, var(--text) 92%, transparent);
            text-decoration: none;
            opacity: .92;
        }
        .back-link:hover{
            opacity: 1;
            text-decoration: underline;
        }
    </style>
</head>

<body>
<nav class="navbar navbar-dark app-navbar">
    <div class="container d-flex justify-content-between align-items-center">
        <a class="navbar-brand d-flex align-items-center gap-2" href="/">
            <span class="brand-dot"></span>
            <span class="fw-bold">TransportApp</span>
        </a>

        <div class="d-flex align-items-center gap-2">
            <a class="back-link small d-none d-sm-inline" href="/">Volver</a>

            <button id="themeToggle" class="theme-btn" type="button" aria-label="Cambiar tema">
                <span id="themeIcon">ðŸŒ™</span>
                <span class="d-none d-sm-inline">Tema</span>
            </button>
        </div>
    </div>
</nav>

<div class="bg-blur-wrap d-flex align-items-center">
    <main class="container py-5" style="max-width: 460px; position: relative; z-index: 1;">
        <div class="glass-card p-4 p-md-5">

            <div class="d-flex justify-content-between align-items-start mb-3">
                <div>
                    <div class="admin-badge">Admin</div>
                    <h1 class="h4 headline mt-2 mb-1">Iniciar sesiÃ³n</h1>
                    <div class="subtle small">Acceso para ver agenda, pagos y tickets.</div>
                </div>
            </div>

            <% if (error) { %>
                <div class="alert alert-danger mb-3" role="alert"><%= error %></div>
            <% } %>

            <form method="POST" action="/admin/login" class="vstack gap-3 mt-2" autocomplete="on">
                <div>
                    <label for="user" class="form-label subtle mb-1">Usuario</label>
                    <input
                            id="user"
                            name="user"
                            class="form-control"
                            placeholder="Usuario"
                            required
                            autofocus
                            autocomplete="username"
                            inputmode="text"
                            autocapitalize="none"
                            spellcheck="false"
                    />
                </div>

                <div>
                    <label for="pass" class="form-label subtle mb-1">ContraseÃ±a</label>
                    <input
                            id="pass"
                            name="pass"
                            type="password"
                            class="form-control"
                            placeholder="ContraseÃ±a"
                            required
                            autocomplete="current-password"
                    />
                </div>

                <button class="btn btn-wine btn-admin w-100" type="submit">Entrar</button>

                <div class="text-center small subtle mt-2">
                    Si no eres admin, regresa a
                    <a href="/" class="text-decoration-none" style="color: var(--wine); font-weight: 800;">
                        TransportApp
                    </a>.
                </div>
            </form>

        </div>
    </main>
</div>

<script src="/js/theme.js"></script>
</body>
</html>
